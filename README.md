# iqra

مشروع Rust نموذجي بهيكل احترافي مبدئي.

# دليل سريع للمستخدم | Quick Start Guide

## المتطلبات
- تثبيت Rust: https://rustup.rs

## تشغيل اقرأ
```powershell
cargo run -- repl
```

## أول برنامج عربي
```iqra
عدد = ١
بينما عدد < ٣ {
    اطبع عدد
    عدد = عدد + ١
}
```

## أول برنامج إنجليزي
```iqra
x = 1
while x < 3 {
    print x
    x = x + 1
}
```

## تشغيل اختبار
```powershell
cargo test
```

---


### القوائم | Lists


- `list(...)`, `قائمة(...)`: إنشاء قائمة من عناصر | Create a list from elements

  - مثال:

    ```iqra
    l = list(1, 2, 3)
    ق = قائمة(١, ٢, ٣)
    ```

- `list_len(l)`, `طول_القائمة(ق)`: عدد عناصر القائمة | Get list length

  - مثال:

    ```iqra
    list_len(l)
    طول_القائمة(ق)
    ```

- `get(l, i)`, `عنصر(ق, ف)`: جلب عنصر بفهرس | Get element by index

  - مثال:

    ```iqra
    get(l, 0)
    عنصر(ق, ١)
    ```

- `append(l, v)`, `أضف(ق, ع)`: إضافة عنصر | Append element

  - مثال:

    ```iqra
    l = append(l, 4)
    ق = أضف(ق, ٤)
    ```

- `remove(l, v)`, `احذف(ق, ع)`: حذف عنصر | Remove element

  - مثال:

    ```iqra
    l = remove(l, 2)
    ق = احذف(ق, ٢)
    ```

- `contains(l, v)`, `يحتوي(ق, ع)`: هل القائمة تحتوي العنصر؟ | List contains value

  - مثال:

    ```iqra
    contains(l, 3)
    يحتوي(ق, ٣)
    ```
## أفكار تطوير لاحقة

- دعم أوامر فرعية (subcommands)
- إضافة logging (`tracing`)
- تغليف خروج أخطاء مفصل
 
## الكلمات المفتاحية العربية المدعومة

| true      | صحيح                 |
| false     | خطأ                  |
| if        | اذا / إذا            |
| else      | وإلا / والا / وإلاّ   |
| while     | بينما                |
| and      | و / &&                |
| not      | ليس / !               |

مثال:

```text
اذا 1 < 2 {
  اطبع "صحيح";
} وإلا {

### اقرأ | Iqra Programming Language

اقرأ هي لغة برمجة عربية بالكامل، تدعم كتابة البرامج بالعربية أو الإنجليزية، وتوفر توثيقًا ثنائي اللغة (عربي/إنجليزي) وواجهة تفاعلية احترافية.
Iqra is a fully Arabic programming language. You can write code in Arabic or English, with professional bilingual documentation and interactive REPL.

---
- رسائل الأخطاء والتشخيص تظهر بالعربية بشكل احترافي.
- جميع الدوال المدمجة متاحة بالاسم العربي والإنجليزي.
- توثيق ثنائي اللغة (عربي/إنجليزي) لكل ميزة.
- أمثلة عملية واضحة لكل خاصية.
- واجهة REPL تفاعلية مع دعم الإكمال التلقائي للكلمات المفتاحية والدوال.

---

---


### اقرأ | Iqra Programming Language

اقرأ هي لغة برمجة عربية بالكامل، تدعم كتابة البرامج بالعربية أو الإنجليزية، وتوفر توثيقًا ثنائي اللغة (عربي/إنجليزي) وواجهة تفاعلية احترافية.

Iqra is a fully Arabic programming language. You can write code in Arabic or English, with professional bilingual documentation and interactive REPL.

---

## المميزات الرئيسية | Main Features

- دعم كامل للغة العربية والإنجليزية في بناء الجمل البرمجية والكلمات المفتاحية والدوال.
- رسائل الأخطاء والتشخيص تظهر بالعربية بشكل احترافي.
- جميع الدوال المدمجة متاحة بالاسم العربي والإنجليزي.
- توثيق ثنائي اللغة (عربي/إنجليزي) لكل ميزة.
- أمثلة عملية واضحة لكل خاصية.
- واجهة REPL تفاعلية مع دعم الإكمال التلقائي للكلمات المفتاحية والدوال.

---

## مقدمة سريعة | Quick Introduction

### مثال برنامج عربي

```iqra
عدد = ١
بينما عدد < ٣ {
  اطبع عدد
  عدد = عدد + ١
}
```

### Example in English

```iqra
x = 1
while x < 3 {
  print x
  x = x + 1
}
```

---
- `list_len(l)`, `طول_القائمة(ق)`: عدد عناصر القائمة | Get list length
  - مثال: `list_len(l)` أو `طول_القائمة(ق)`
- `get(l, i)`, `عنصر(ق, ف)`: جلب عنصر بفهرس | Get element by index
  - مثال: `get(l, 0)` أو `عنصر(ق, ١)`
- `append(l, v)`, `أضف(ق, ع)`: إضافة عنصر | Append element
  - مثال: `l = append(l, 4)` أو `ق = أضف(ق, ٤)`
- `remove(l, v)`, `احذف(ق, ع)`: حذف عنصر | Remove element
  - مثال: `l = remove(l, 2)` أو `ق = احذف(ق, ٢)`
- `contains(l, v)`, `يحتوي(ق, ع)`: هل القائمة تحتوي العنصر؟ | List contains value
  - مثال: `contains(l, 3)` أو `يحتوي(ق, ٣)`


## القواميس | Maps

- `map(k1, v1, k2, v2, ...)`, `قاموس(م١, ق١, ...)`: إنشاء قاموس | Create a map

  - مثال:

    ```iqra
    m = map('a', 1, 'b', 2)
    ق = قاموس('س', ١, 'ص', ٢)
    ```

- `map_get(m, k)`, `جلب_عنصر(ق, م)`: جلب قيمة بمفتاح | Get value by key

  - مثال:

    ```iqra
    map_get(m, 'a')
    جلب_عنصر(ق, 'س')
    ```

- `map_set(m, k, v)`, `تعيين_عنصر(ق, م, ق)`: تعيين قيمة | Set value by key

  - مثال:

    ```iqra
    m = map_set(m, 'c', 3)
    ق = تعيين_عنصر(ق, 'ع', ٣)
    ```

- `map_remove(m, k)`, `حذف_عنصر(ق, م)`: حذف عنصر | Remove key

  - مثال:

    ```iqra
    m = map_remove(m, 'a')
    ق = حذف_عنصر(ق, 'س')
    ```


## التحويل والفحص | Conversion & Checks

- `to_number(x)`, `إلى_رقم(س)`: تحويل إلى رقم | Convert to number
- `to_string(x)`, `إلى_نص(س)`: تحويل إلى نص | Convert to string
- `is_number(x)`, `رقم؟(س)`: هل رقم؟ | Is number?
- `is_string(x)`, `نص؟(س)`: هل نص؟ | Is string?


## النوع والطول | Type & Length

- `type(x)`, `نوع(س)`: نوع القيمة | Get type
- `len(x)`, `طول(س)`: طول نص أو قائمة | Length of string or list

---

كل دالة متاحة بالاسم العربي والإنجليزي، وتعمل مع جميع أنواع البيانات المدعومة.



### دوال متقدمة للقوائم | Advanced List Functions

- `find(l, f)`, `ابحث(ق, د)`: إيجاد أول عنصر يحقق الشرط | Find first element matching predicate

  - مثال:

    ```iqra
    find(list(1, 'a', 2), is_string)
    ابحث(قائمة(١, 'س', ٢), نص؟)
    ```

- `forEach(l, f)`, `لكل(ق, د)`: تنفيذ دالة على كل عنصر (لا ترجع قيمة) | Apply function to each element (returns nil)

  - مثال:

    ```iqra
    forEach(list(1, 2, 3), to_string)
    لكل(قائمة(١, ٢, ٣), إلى_نص)
    ```
- `concat(l1, l2)`, `ادمج(ق١, ق٢)`: دمج قائمتين | Concatenate two lists
  - مثال: `concat(list(1, 2), list(3, 4))` أو `ادمج(قائمة(١, ٢), قائمة(٣, ٤))`

---



### دالة متقدمة: groupBy/صنف | Advanced: groupBy

- `groupBy(l, f)`, `صنف(ق, د)`: تجميع عناصر القائمة حسب خاصية أو دالة | Group list elements by key function

  - مثال:

    ```iqra
    groupBy(list(1, 'a', 2, 'b'), type)
    صنف(قائمة(١, 'س', ٢, 'ص'), نوع)
    ```

---


### دوال رياضية ونصية وتاريخية متقدمة | Advanced Math, Text & Date Functions

- `sum(l)`, `جمع(ق)`: مجموع عناصر القائمة الرقمية | Sum of list elements
  - مثال: `sum(list(1, 2, 3))` أو `جمع(قائمة(١, ٢, ٣))`  ← 6
- `average(l)`, `متوسط(ق)`: متوسط عناصر القائمة الرقمية | Average of list elements
  - مثال: `average(list(1, 2, 3))` أو `متوسط(قائمة(١, ٢, ٣))`  ← 2
- `max(l)`, `أكبر(ق)`: أكبر عنصر في القائمة الرقمية | Maximum value in list
  - مثال: `max(list(1, 5, 3))` أو `أكبر(قائمة(١, ٥, ٣))`  ← 5
- `min(l)`, `أصغر(ق)`: أصغر عنصر في القائمة الرقمية | Minimum value in list
  - مثال: `min(list(1, 5, 3))` أو `أصغر(قائمة(١, ٥, ٣))`  ← 1
- `word_count(s)`, `عدد_الكلمات(نص)`: عدد الكلمات في نص | Word count in string
  - مثال: `word_count("hello world")` أو `عدد_الكلمات("مرحبا بالعالم")`  ← 2
- `reverse(x)`, `عكس(س)`: عكس قائمة أو نص | Reverse list or string
  - مثال: `reverse(list(1,2,3))` أو `عكس("abc")`  ← `[3,2,1]` أو `"cba"`
- `today()`, `تاريخ_اليوم()`: تاريخ اليوم الحالي | Current date (YYYY-MM-DD)
  - مثال: `today()` أو `تاريخ_اليوم()`  ← `2025-09-08`

---


### مثال عملي

```iqra
ق1 = قائمة(١, ٢)
ق2 = قائمة(٣, ٤)
ق = ادمج(ق1, ق2)
اطبع ق
اطبع ابحث(ق, رقم؟)
لكل(ق, إلى_نص)

ق = قائمة(١, 'س', ٢, 'ص', ٣, 'ع')
مجموعات = صنف(ق, نوع)
اطبع مجموعات

ق = قائمة(١, ٢, ٣, ٤)
اطبع جمع(ق)         # 10
اطبع متوسط(ق)       # 2.5
اطبع أكبر(ق)        # 4
اطبع أصغر(ق)        # 1
نص = "مرحبا بكم في اقرأ"
اطبع عدد_الكلمات(نص) # 4
```
اطبع عكس(ق)         # [4, 3, 2, 1]
اطبع عكس(نص)        # "أقرأ في كم بكم مرحبا"
اطبع تاريخ_اليوم()  # 2025-09-08
```

---


### أمثلة عملية متقدمة | Advanced Practical Examples

## مثال: معالجة قائمة أرقام
```iqra
ق = قائمة(١, ٢, ٣, ٤, ٥)
اطبع جمع(ق)         # 15
اطبع متوسط(ق)       # 3
اطبع أكبر(ق)        # 5
اطبع أصغر(ق)        # 1
اطبع عكس(ق)         # [5, 4, 3, 2, 1]
```


## مثال: معالجة نصوص

```iqra
نص = "مرحبا بكم في لغة اقرأ"
اطبع عدد_الكلمات(نص) # 5
اطبع عكس(نص)         # "أقرأ لغة في بكم مرحبا"
```


## مثال: استخدام القاموس

```iqra
ق = قاموس('اسم', 'أحمد', 'عمر', ٣٠)
اطبع جلب_عنصر(ق, 'اسم')   # أحمد
اطبع جلب_عنصر(ق, 'عمر')   # ٣٠
ق = تعيين_عنصر(ق, 'مدينة', 'الرياض')
اطبع ق
```


## مثال: دوال التاريخ

```iqra
اطبع تاريخ_اليوم()  # 2025-09-08
```


## مثال: الجمع بين القوائم والقواميس

```iqra
طلاب = قائمة(قاموس('اسم', 'سارة', 'عمر', ٢٢), قاموس('اسم', 'خالد', 'عمر', ٢٥))
لكل(طلاب, إلى_نص)
```


## مثال إنجليزي

```iqra
l = list(1, 2, 3, 4, 5)
print(sum(l))         # 15
print(average(l))     # 3
print(max(l))         # 5
print(min(l))         # 1
print(reverse(l))     # [5, 4, 3, 2, 1]
s = "hello from iqra language"
print(word_count(s))  # 4
print(reverse(s))     # "language iqra from hello"
m = map('name', 'Ahmed', 'age', 30)
print(map_get(m, 'name'))  # Ahmed
print(map_get(m, 'age'))   # 30
m = map_set(m, 'city', 'Riyadh')
print(m)
print(today())        # 2025-09-08
```

---

كل دالة متاحة بالاسم العربي والإنجليزي، وتعمل مع جميع أنواع البيانات المدعومة.

---

## دوال النظام | System Built-ins

### تنفيذ أمر نظام | Run System Command
```iqra
نتيجة = system("echo Hello World")
اطبع نتيجة

نتيجة = نفذ_أمر("echo مرحباً بالعالم")
اطبع نتيجة
```

### قراءة ملف | Read File
```iqra
محتوى = read_file("test.txt")
اطبع محتوى

محتوى = اقرأ_ملف("ملف.txt")
اطبع محتوى
```

### كتابة ملف | Write File
```iqra
نجاح = write_file("test.txt", "Hello from Iqra!")
اطبع نجاح

نجاح = اكتب_ملف("ملف.txt", "مرحبا من اقرأ!")
اطبع نجاح
```

### قائمة الملفات | List Files
```iqra
ملفات = list_files("./")
اطبع ملفات

ملفات = قائمة_ملفات("./")
اطبع ملفات
```

### متغيرات البيئة | Environment Variables
```iqra
مسار = env_var("PATH")
اطبع مسار

مسار = متغير_بيئة("PATH")
اطبع مسار
```

---

## ميزات متقدمة | Advanced Features

### تنفيذ أمر نظام مع مدخل نصي | Run System Command with Input
```iqra
نتيجة = system_with_io("findstr مرحباً", "مرحباً\nوداعاً\nمرحباً مرة أخرى")
اطبع نتيجة

نتيجة = نفذ_أمر_بمدخل("findstr مرحباً", "مرحباً\nوداعاً\nمرحباً مرة أخرى")
اطبع نتيجة
```

### معلومات النظام | System Info
```iqra
معلومات = system_info()
اطبع معلومات

معلومات = معلومات_النظام()
اطبع معلومات
```

---

